{"ast":null,"code":"var _jsxFileName = \"D:\\\\Practica02\\\\react-crud-frontend\\\\src\\\\components\\\\EnrollmentForm.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport api from '../services/api';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EnrollmentForm() {\n  _s();\n  const [estudiantes, setEstudiantes] = useState([]);\n  const [form, setForm] = useState({\n    estudiante: '',\n    curso: '',\n    semestre: '',\n    fecha: '',\n    comprobante: null\n  });\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    api.get('/estudiantes/').then(r => setEstudiantes(r.data));\n    if (id) {\n      api.get(`/matriculas/${id}/`).then(r => {\n        setForm({\n          ...r.data,\n          comprobante: null\n        });\n      });\n    }\n  }, [id]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    setForm(prev => ({\n      ...prev,\n      [name]: files ? files[0] : value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const data = new FormData();\n    Object.entries(form).forEach(([k, v]) => {\n      if (v !== null) data.append(k, v);\n    });\n    try {\n      if (id) {\n        await api.patch(`/matriculas/${id}/`, data);\n        toast.success('Matrícula actualizada');\n      } else {\n        await axios.post('/matriculas/', data);\n        toast.success('Matrícula creada');\n      }\n      navigate('/enrollments');\n    } catch (err) {\n      toast.error('Error al guardar');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.form, {\n    onSubmit: handleSubmit,\n    className: \"p-4 bg-white rounded-lg shadow max-w-md mx-auto space-y-4\",\n    initial: {\n      x: 100,\n      opacity: 0\n    },\n    animate: {\n      x: 0,\n      opacity: 1\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold\",\n      children: [id ? 'Editar' : 'Nueva', \" Matr\\xEDcula\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      name: \"estudiante\",\n      value: form.estudiante,\n      onChange: handleChange,\n      required: true,\n      className: \"w-full p-2 border rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Selecciona Estudiante\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), estudiantes.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: s.id,\n        children: s.nombre\n      }, s.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"curso\",\n      type: \"text\",\n      placeholder: \"Curso\",\n      value: form.curso,\n      onChange: handleChange,\n      required: true,\n      className: \"w-full p-2 border rounded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"semestre\",\n      type: \"text\",\n      placeholder: \"Semestre\",\n      value: form.semestre,\n      onChange: handleChange,\n      required: true,\n      className: \"w-full p-2 border rounded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"fecha\",\n      type: \"date\",\n      value: form.fecha,\n      onChange: handleChange,\n      required: true,\n      className: \"w-full p-2 border rounded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"comprobante\",\n      type: \"file\",\n      onChange: handleChange,\n      className: \"w-full p-2\",\n      accept: \"image/*\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",\n      children: id ? 'Actualizar' : 'Crear'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(EnrollmentForm, \"ts/LuxYex8iUwG5uIsiTiHF48PE=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = EnrollmentForm;\nvar _c;\n$RefreshReg$(_c, \"EnrollmentForm\");","map":{"version":3,"names":["useEffect","useState","api","useNavigate","useParams","motion","toast","jsxDEV","_jsxDEV","EnrollmentForm","_s","estudiantes","setEstudiantes","form","setForm","estudiante","curso","semestre","fecha","comprobante","navigate","id","get","then","r","data","handleChange","e","name","value","files","target","prev","handleSubmit","preventDefault","FormData","Object","entries","forEach","k","v","append","patch","success","axios","post","err","error","onSubmit","className","initial","x","opacity","animate","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","required","map","s","nombre","type","placeholder","accept","_c","$RefreshReg$"],"sources":["D:/Practica02/react-crud-frontend/src/components/EnrollmentForm.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport api from '../services/api'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { motion } from 'framer-motion'\r\nimport { toast } from 'react-toastify'\r\n\r\nexport default function EnrollmentForm() {\r\n  const [estudiantes, setEstudiantes] = useState([])\r\n  const [form, setForm] = useState({ estudiante: '', curso: '', semestre: '', fecha: '', comprobante: null })\r\n  const navigate = useNavigate()\r\n  const { id } = useParams()\r\n\r\n  useEffect(() => {\r\n    api.get('/estudiantes/').then(r => setEstudiantes(r.data))\r\n    if (id) {\r\n      api.get(`/matriculas/${id}/`).then(r => {\r\n        setForm({ ...r.data, comprobante: null })\r\n      })\r\n    }\r\n  }, [id])\r\n\r\n  const handleChange = e => {\r\n    const { name, value, files } = e.target\r\n    setForm(prev => ({\r\n      ...prev,\r\n      [name]: files ? files[0] : value\r\n    }))\r\n  }\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault()\r\n    const data = new FormData()\r\n    Object.entries(form).forEach(([k, v]) => {\r\n      if (v !== null) data.append(k, v)\r\n    })\r\n    try {\r\n      if (id) {\r\n        await api.patch(`/matriculas/${id}/`, data)\r\n        toast.success('Matrícula actualizada')\r\n      } else {\r\n        await axios.post('/matriculas/', data)\r\n        toast.success('Matrícula creada')\r\n      }\r\n      navigate('/enrollments')\r\n    } catch (err) {\r\n      toast.error('Error al guardar')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <motion.form \r\n      onSubmit={handleSubmit}\r\n      className=\"p-4 bg-white rounded-lg shadow max-w-md mx-auto space-y-4\"\r\n      initial={{ x: 100, opacity: 0 }}\r\n      animate={{ x: 0, opacity: 1 }}\r\n    >\r\n      <h2 className=\"text-xl font-semibold\">{ id ? 'Editar' : 'Nueva' } Matrícula</h2>\r\n      <select name=\"estudiante\" value={form.estudiante} onChange={handleChange} required className=\"w-full p-2 border rounded\">\r\n        <option value=\"\">Selecciona Estudiante</option>\r\n        {estudiantes.map(s => (\r\n          <option key={s.id} value={s.id}>{s.nombre}</option>\r\n        ))}\r\n      </select>\r\n      <input name=\"curso\" type=\"text\" placeholder=\"Curso\" value={form.curso} onChange={handleChange} required className=\"w-full p-2 border rounded\" />\r\n      <input name=\"semestre\" type=\"text\" placeholder=\"Semestre\" value={form.semestre} onChange={handleChange} required className=\"w-full p-2 border rounded\" />\r\n      <input name=\"fecha\" type=\"date\" value={form.fecha} onChange={handleChange} required className=\"w-full p-2 border rounded\" />\r\n      <input name=\"comprobante\" type=\"file\" onChange={handleChange} className=\"w-full p-2\" accept=\"image/*\" />\r\n      <button type=\"submit\" className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\">\r\n        {id ? 'Actualizar' : 'Crear'}\r\n      </button>\r\n    </motion.form>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}